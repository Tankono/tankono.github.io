(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[236],{1866:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shell",function(){return i(6381)}])},2122:function(e,t,i){"use strict";i.r(t),i.d(t,{AdbTerminal:function(){return c}});var s=i(9819),n=i(2469),o=i(6261),r=i(2825),l=i(4623),a=i(8913),d=i(29);class c extends n.Xn{get socket(){return this._socket}set socket(e){if(this._socket){var t;this.dispose(),null===(t=this._socketAbortController)||void 0===t||t.abort()}if(this._socket=e,e){this.terminal.clear(),this.terminal.reset(),this._socketAbortController=new o.HS,e.stdout.pipeTo(new o.Vj({write:e=>{this.terminal.write(e)}}),{signal:this._socketAbortController.signal});let t=e.stdin.getWriter();this.addDisposable(this.terminal.onData(e=>{let i=(0,s.lz)(e);t.write(i)})),this.fit()}}setContainer(e){e.appendChild(this.element),this.terminal.element||(this.element.offsetWidth,this.terminal.open(this.element),this.terminal.loadAddon(new d.WebglAddon),this.terminal.options.cursorBlink=!0,this.fit())}fit(){var e;this.fitAddon.fit();let{rows:t,cols:i}=this.terminal;null===(e=this._socket)||void 0===e||e.resize(t,i)}constructor(){super(),this.element=document.createElement("div"),this.terminal=new r.Terminal({allowProposedApi:!0,allowTransparency:!0,cursorStyle:"bar",cursorBlink:!0,fontFamily:'"Cascadia Code", Consolas, monospace, "Source Han Sans SC", "Microsoft YaHei"',letterSpacing:1,scrollback:9e3,smoothScrollDuration:50,overviewRulerWidth:20}),this.searchAddon=new a.SearchAddon,this.fitAddon=new l.FitAddon,this.element.style.width="100%",this.element.style.height="100%",this.element.style.overflow="hidden",this.terminal.loadAddon(this.searchAddon),this.terminal.loadAddon(this.fitAddon)}}},6381:function(e,t,i){"use strict";let s;i.r(t);var n=i(4471),o=i(486),r=i(9963),l=i(1196),a=i(3935),d=i(9162),c=i(9287),h=i(7532),u=i(9281),v=i(9614),f=i.n(v),w=i(3370);i(2038);var m=i(1909),x=i(1001),b=i(97);let k=(0,d.Z)({count:{...c.q5.padding("0","8px")}});{let{AdbTerminal:e}=i(2122);s=new e}let p={decorations:{matchBackground:"#42557b",matchOverviewRuler:"#d18616",activeMatchBackground:"#6199ff2f",activeMatchColorOverviewRuler:"#d186167e"}},C=(0,h.ky)({visible:!1,index:void 0,count:void 0,setVisible(e){this.visible=e},searchKeyword:"",setSearchKeyword(e){this.searchKeyword=e,s.searchAddon.findNext(e,{...p,incremental:!0})},searchPrevious(){s.searchAddon.findPrevious(this.searchKeyword,p)},searchNext(){s.searchAddon.findNext(this.searchKeyword,p)}},{searchPrevious:h.aD.bound,searchNext:h.aD.bound});s&&s.searchAddon.onDidChangeResults(e=>{console.log(e),(0,h.z)(()=>{e?(C.index=e.resultIndex,C.count=e.resultCount):(C.index=void 0,C.count=void 0)})}),(0,h.EH)(()=>{if(s){if(!x.d.device){s.socket=void 0;return}!s.socket&&C.visible&&x.d.device.subprocess.shell().then((0,h.aD)(e=>{s.socket=e}),e=>{x.d.showErrorDialog(e)})}});let A={iconName:b.PJ.ChevronUp},g={iconName:b.PJ.ChevronDown},_=()=>{let e=k(),t=(0,w.useCallback)((e,t)=>{C.setSearchKeyword(null!=t?t:"")},[]),i=(0,w.useCallback)(()=>{s.fit()},[]),d=(0,w.useCallback)(e=>{e&&s.setContainer(e)},[]);return(0,w.useEffect)(()=>(C.setVisible(!0),()=>{C.setVisible(!1)}),[]),(0,n.jsxs)(o.K,{...b.LE,children:[(0,n.jsx)(f(),{children:(0,n.jsx)("title",{children:"Interactive Shell - Android Web Toolbox"})}),(0,n.jsx)(r.v,{children:(0,n.jsxs)(o.K,{horizontal:!0,children:[(0,n.jsx)(r.v,{grow:!0,children:(0,n.jsx)(l.R,{placeholder:"Find",value:C.searchKeyword,onChange:t,onSearch:C.searchNext})}),0===C.count?(0,n.jsx)(r.v,{className:e.count,align:"center",children:"No results"}):void 0!==C.count?(0,n.jsxs)(r.v,{className:e.count,align:"center",children:[C.index+1," of ",C.count]}):null,(0,n.jsx)(r.v,{children:(0,n.jsx)(a.h,{disabled:!C.searchKeyword,iconProps:A,onClick:C.searchPrevious})}),(0,n.jsx)(r.v,{children:(0,n.jsx)(a.h,{disabled:!C.searchKeyword,iconProps:g,onClick:C.searchNext})})]})}),(0,n.jsxs)(r.v,{grow:!0,styles:{root:{position:"relative",minHeight:0}},children:[(0,n.jsx)(m.do,{onResize:i}),(0,n.jsx)("div",{ref:d,style:{height:"100%"}})]})]})};t.default=(0,u.Pi)(_)}},function(e){e.O(0,[988,805,774,888,179],function(){return e(e.s=1866)}),_N_E=e.O()}]);
//# sourceMappingURL=shell-9fcee2e023cf9cc4.js.map